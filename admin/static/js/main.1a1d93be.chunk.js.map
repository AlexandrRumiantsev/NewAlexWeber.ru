{"version":3,"sources":["index.js"],"names":["store","createStore","state","data","action","type","Header","props","headerArr","takeData","project_form","dispatch","img","className","axios","post","id_group","name","document","getElementById","value","link","discription","image","imageFull","then","response","console","log","JSON","stringify","catch","error","id","onClick","addProject","arr","undefined","this","login","setState","showProjectAddForm","form","dataHeader","React","Component","Body","arguments","getState","unsubscribe","subscribe","user","project_name","delFunc","get","sayOK","bind","tmp","map","n","key","_id","src","target","href","delButton","AdminPanel","jsonAPI","flag","uppgrade","setInterval","projects","Promise","res","Error","Authorization","autoriz","pass","length","ReactDOM","render","Response","isSuccess","alert"],"mappings":"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","file":"static/js/main.1a1d93be.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport axios from 'axios';\n\n/* Пример REDUX */\nimport {createStore} from 'redux';\n\nconst reducer = (state = {data: 'Hi'}, action) => {\n    switch (action.type) {\n        case 'SAY OK': return {data: 'OK'};\n        case 'HEADER': return {\n            data: <h1>HEADER</h1>\n        };\n        default: return state;\n    }\n}\n\nconst store = createStore(reducer);\n\nclass Header extends React.Component {\n    \n takeData(){\n    store.dispatch({type: 'HEADER'});\n }\n img(img){\n     \n     switch(img){\n         case 'default':{\n             return <div className='section-header__img__default-img'> </div>\n         }\n     }\n     \n } \n addProject(){\n    \n      axios.post('http://alexweber.ru:5000/save', {\n            id_group: '1' ,\n            name: document.getElementById(\"name_project\").value ,\n            link: document.getElementById(\"url_project\").value ,\n            discription: document.getElementById(\"discr_project\").value ,\n            image: document.getElementById(\"image_project\").value ,\n            imageFull: document.getElementById(\"image_full_project\").value ,\n        })\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n      })\n      .catch(function (error) {\n        console.log(JSON.stringify(error));\n      });\n     }\n     \n showProjectAddForm(){\n     return <div id='pop-app'>\n             <div>\n                <input id='name_project' type='text'/>\n             </div>\n             <div>\n                <input id='discr_project' type='text'/>\n             </div>\n             <div>\n                <input id='url_project' type='text'/>\n             </div>\n             <div>\n                <input id='id_group_project' type='text'/>\n             </div>\n             <div>\n                <input id='image_project' type='text'/>\n             </div>\n             <div>\n                <input id='image_full_project' type='text'/>\n             </div>\n             <div>\n                <span onClick={  () => this.addProject() } >Добавить проект </span>\n             </div>\n          </div>;\n }     \n\n form(arr){\n     let stateForm = 0 ;\n     return <section className='section-header'>\n     \n                <header className='section-header__img'>\n                    { (arr[0].img === undefined) ? this.img('default') : this.img(arr[0].img) }\n                </header>\n                \n                <main className='section-header__name'>\n                    Имя: { arr[0].name }\n                </main>\n                \n                <footer className='section-header__login'>\n                    Логин: { arr[0].login }\n                </footer>\n                \n                <div className='section-header__add-project'>\n                   <button onClick={ () => { this.setState({project_form: 1}); } }>Добавить проект</button>\n                </div>\n                <div>{ (this.state.project_form == 1) ? this.showProjectAddForm() : '' }</div>\n            </section>\n }  \n constructor(props) {\n    super(props);\n\n    this.state = {\n      headerArr: this.takeData() , \n      project_form: 0\n    };\n  }\n  componentWillMount(){\n     this.takeData();\n     console.log(this.state.headerArr);\n  }\n  render() {\n       return <div className='Header'> { this.form(this.props.dataHeader) } </div>\n  }\n  \n}\n\nclass Body extends React.Component {\n  //Пример REDUX    \n  constructor () {\n        super(...arguments);\n        this.state = store.getState();\n        this.unsubscribe = store.subscribe(() => {\n            this.setState(store.getState());\n        });\n    }\n  sayOK () {\n        store.dispatch({type: 'SAY OK'});\n  }\n  //END REDUX\n  delButton (user, project_name) {\n      if(user[0].login === 'Admin'){\n          return  <button onClick={ () => this.delFunc( project_name ) } className='project-container__del'> \n                      Удалить\n                  </button>\n      }\n  }\n  delFunc(name ){\n      axios.get('http://alexweber.ru:5000/delete?name=' + name)\n          .then( console.log('Delete ' + name) );\n  }\n  render() {\n    return <div className='main-container'>\n              \n              <h1>{this.state.data}</h1>\n              <h2 onClick={this.sayOK.bind(this)}>Скажи ОК</h2>\n              \n              {this.props.tmp.map(n =>\n                    <div className='project' key={n._id}>\n                        <main className='project-container'>\n                            <img  className='project-container__img' src={'http://alexweber.ru/img/'+n.image} /> \n                            <a className='project-container__del' target='_blank' href={n.link}> {n.name} </a>\n                            { this.delButton(this.props.user , n.name  ) }\n                        </main>     \n                    </div>\n                )\n              }</div>\n  }\n}\n\nclass AdminPanel extends React.Component {\n  uppgrade(flag){\n      if(flag===0){\n        this.get();\n        this.uppgrade(1);\n      }else{\n          setInterval(()=>{ \n              this.get(); \n          }, 30000);\n      }\n  }\n  get(){\n      \n    let projects = [];\n    \n        new Promise( ()=>\n             axios.get(`http://alexweber.ru:5000/data`)\n                  .then(res => {\n                    projects = res.data;\n                    console.log(projects);\n                    this.setState({\n                      jsonAPI: projects\n                    })\n                  }) \n         ).then(() => {\n            throw new Error('Где-то произошла ошибка');\n        });     \n    \n    return this.state.jsonAPI;      \n  }\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      jsonAPI: []\n    };\n  }\n  componentWillMount(){\n     this.uppgrade(0);\n  }\n  render() {\n    return (\n      <div>\n        <Header dataHeader={this.props.data}/>\n        <Body user={this.props.data} tmp={this.state.jsonAPI} />\n      </div>\n    );\n  }\n}\n\n\n    \nclass Authorization extends React.Component{\n    onClick(){\n      \n       let log = document.getElementById('log').value;\n       let pass = document.getElementById('pass').value;\n\n       axios.get('http://alexweber.ru:5000/login?login=' + log + '&password=' + pass)\n          .then( response => {\n            if (response.data.length != 0) \n                ReactDOM.render(<Response data={response.data} isSuccess={true} />,  document.getElementById('root'))\n            else{\n                alert('Неверный логин или пароль');\n                ReactDOM.render(<Response isSuccess={false} />,  document.getElementById('root'));\n            }   \n          });\n    }\n    constructor(props) {\n        super(props);\n    \n        this.state = {\n          autoriz: []\n        };\n    }\n    render(){\n        return (\n             <div className='Authorization'>\n                <h1>Авторизация пользователя</h1>\n                    <div className='line'>\n                        <div className='row'>Логин:</div> <div className='row'><input id='log'/></div>\n                    </div>\n                    <div className='line'>\n                        <div className='row'> Пароль:</div>  <div className='row'><input id='pass'/></div>\n                    </div>\n                    <span onClick={ this.onClick }>\n                         <div className='sbm'>Залогиниться</div>\n                    </span>\n             </div>\n        )\n    }\n}\n\nfunction Response(props) {\n\n    const isSuccess = props.isSuccess;\n    /**\n     * REDUX\n     **/ \n    return isSuccess ? <AdminPanel data={props.data} /> : <Authorization/>\n\n  }\n\nReactDOM.render(<Response isSuccess={false} />,  document.getElementById('root')); "],"sourceRoot":""}